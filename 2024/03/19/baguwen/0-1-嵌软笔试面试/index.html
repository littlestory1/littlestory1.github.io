<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="昨日已逝，明日未知，而今日为金" href="https://littlestory1.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="昨日已逝，明日未知，而今日为金" href="https://littlestory1.github.io/atom.xml"><link rel="alternate" type="application/json" title="昨日已逝，明日未知，而今日为金" href="https://littlestory1.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="嵌入式面试八股文"><link rel="canonical" href="https://littlestory1.github.io/2024/03/19/baguwen/0-1-%E5%B5%8C%E8%BD%AF%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95/"><title>嵌入式软件笔试面试八股文 - 嵌入式面试八股文 | alittlestory = 昨日已逝，明日未知，而今日为金</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">嵌入式软件笔试面试八股文</h1><div class="meta"><span class="item" title="创建时间：2024-03-19 01:09:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2024-03-19T01:09:00+08:00">2024-03-19</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>6.9k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>6 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">alittlestory</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://i.imgs.ovh/2023/11/24/Muk2t.jpeg"></li><li class="item" data-background-image="https://i.imgs.ovh/2023/11/24/MufHU.jpeg"></li><li class="item" data-background-image="https://i.imgs.ovh/2023/11/24/Mus6p.jpeg"></li><li class="item" data-background-image="https://i.imgs.ovh/2023/11/24/MuK9u.jpeg"></li><li class="item" data-background-image="https://i.imgs.ovh/2023/11/24/MSToK.jpeg"></li><li class="item" data-background-image="https://i.imgs.ovh/2023/11/24/Mu0hm.jpeg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/baguwen/" itemprop="item" rel="index" title="分类于 嵌入式面试八股文"><span itemprop="name">嵌入式面试八股文</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://littlestory1.github.io/2024/03/19/baguwen/0-1-%E5%B5%8C%E8%BD%AF%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="alittlestory"><meta itemprop="description" content=", "></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="昨日已逝，明日未知，而今日为金"></span><div class="body md" itemprop="articleBody"><p><img data-src="1.jpg" alt></p><h2 id="嵌入式软件笔试面试"><a class="anchor" href="#嵌入式软件笔试面试">#</a> 嵌入式软件笔试面试</h2><h3 id="define-声明"><a class="anchor" href="#define-声明">#</a> #define 声明</h3><blockquote><p>用预处理指令 #define 声明一个常数，用以表明 1 年中有多少秒（忽略闰年问题）<br>答案： #define SECONDS_PER_YEAR (60 * 60 * 24 * 365) UL<br><strong>我在这想看到几件事情：</strong></p><ol><li>#define 语法的基本知识（例如：不能以分号结束，括号的使用，等等）</li><li>懂得预处理器将为你计算常数表达式的值，因此，直接写出你是如何计算一年中有多少秒而不是计算出实际的值，是更清晰而没有代价的。</li><li>意识到这个表达式将使一个 16 位机的整型数溢出 - 因此要用到长整型符号 L, 告诉编译器这个常数是的长整型数。</li><li>如果你在你的表达式中用到 UL（表示无符号长整型），那么你有了一个好的起点。记住，第一印象很重要。</li></ol></blockquote><h3 id="标准宏min"><a class="anchor" href="#标准宏min">#</a> &quot;标准&quot; 宏 MIN</h3><blockquote><p>写一个 &quot;标准&quot; 宏 MIN ，这个宏输入两个参数并返回较小的一个。<br>答案： #define MIN (A,B) （（A） &lt;= (B) ? (A) : (B))<br><strong>这个测试是为下面的目的而设的：</strong></p><ol><li>标识 #define 在宏中应用的基本知识。这是很重要的。因为在 嵌入 (inline) 操作符 变为标准 C 的一部分之前，宏是方便产生嵌入代码的唯一方法，对于嵌入式系统来说，为了能达到要求的性能，嵌入代码经常是必须的方法。</li><li>三重条件操作符的知识。这个操作符存在 C 语言中的原因是它使得编译器能产生比 if-then-else 更优化的代码，了解这个用法是很重要的。</li><li>懂得在宏中小心地把参数用括号括起来</li><li>我也用这个问题开始讨论宏的副作用，例如：当你写下面的代码时会发生什么事？<br>least = MIN(*p++, b)；</li></ol></blockquote><h3 id="死循环"><a class="anchor" href="#死循环">#</a> 死循环</h3><blockquote><p>嵌入式系统中经常要用到无限循环，你怎么样用 C 编写死循环呢？<br>这个问题用几个解决方案。我首选的方案是：</p><p>while(1)<br>{}</p><p>一些程序员更喜欢如下方案：</p><p>for(;😉<br>{}</p><p>这个实现方式让我为难，因为这个语法没有确切表达到底怎么回事。如果一个应试者给出这个作为方案，我将用这个作为一个机会去探究他们这样做的基本原理。如果他们的基本答案是：&quot;我被教着这样做，但从没有想到过为什么。&quot; 这会给我留下一个坏印象。</p><p>第三个方案是用 goto<br>Loop:<br>...<br>goto Loop;<br>应试者如给出上面的方案，这说明或者他是一个汇编语言程序员（这也许是好事）或者他是一个想进入新领域的 BASIC/FORTRAN 程序员。</p></blockquote><h3 id="数据声明"><a class="anchor" href="#数据声明">#</a> 数据声明</h3><blockquote><p>a) 一个整型数（An integer）<br>b) 一个指向整型数的指针（ A pointer to an integer）<br>c) 一个指向指针的的指针，它指向的指针是指向一个整型数（ A pointer to a pointer to an intege）r<br>d) 一个有 10 个整型数的数组（ An array of 10 integers）<br>e) 一个有 10 个指针的数组，该指针是指向一个整型数的。（An array of 10 pointers to integers）<br>f) 一个指向有 10 个整型数数组的指针（ A pointer to an array of 10 integers）<br>g) 一个指向函数的指针，该函数有一个整型参数并返回一个整型数（A pointer to a function that takes an integer as an argument and returns an integer）<br>h) 一个有 10 个指针的数组，该指针指向一个函数，该函数有一个整型参数并返回一个整型数（ An array of ten pointers to functions that take an integer argument and return an integer ）</p><p>答案是：<br>a) int a; // An integer<br>b) int *a; // A pointer to an integer<br>c) int **a; // A pointer to a pointer to an integer<br>d) int a[10]; // An array of 10 integers<br>e) int *a[10]; // An array of 10 pointers to integers<br>f) int (*a)[10]; // A pointer to an array of 10 integers<br>g) int (*a)(int); // A pointer to a function a that takes an integer argument and returns an integer<br>h) int (*a[10])(int); // An array of 10 pointers to functions that take an integer argument and return an integer</p></blockquote><h3 id="static的作用"><a class="anchor" href="#static的作用">#</a> static 的作用</h3><blockquote><ol><li>在函数体，一个被声明为静态的变量在这一函数被调用过程中维持其值不变。</li><li>在模块内（但在函数体外），一个被声明为静态的变量可以被模块内所用函数访问，但不能被模块外其它函数访问。它是一个本地的全局变量。</li><li>在模块内，一个被声明为静态的函数只可被这一模块内的其它函数调用。那就是，这个函数被限制在声明它的模块的本地范围内使用。</li></ol></blockquote><h3 id="const含意"><a class="anchor" href="#const含意">#</a> const 含意</h3><blockquote><p>我只要一听到被面试者说：&quot;const 意味着常数&quot;，我就知道我正在和一个业余者打交道。去年 Dan Saks 已经在他的文章里完全概括了 const 的所有用法，因此 ESP (译者：Embedded Systems Programming) 的每一位读者应该非常熟悉 const 能做什么和不能做什么。如果你从没有读到那篇文章，只要能说出 const 意味着 &quot;只读&quot; 就可以了。尽管这个答案不是完全的答案，但我接受它作为一个正确的答案。（如果你想知道更详细的答案，仔细读一下 Saks 的文章吧。）<br>如果应试者能正确回答这个问题，我将问他一个附加的问题：<br>下面的声明都是什么意思？</p><p>const int a;<br>int const a;<br>const int *a;<br>int * const a;<br>int const * a const;</p><p>前两个的作用是一样，a 是一个常整型数。第三个意味着 a 是一个指向常整型数的指针（也就是，整型数是不可修改的，但指针可以）。第四个意思 a 是一个指向整型数的常指针（也就是说，指针指向的整型数是可以修改的，但指针是不可修改的）。最后一个意味着 a 是一个指向常整型数的常指针（也就是说，指针指向的整型数是不可修改的，同时指针也是不可修改的）。如果应试者能正确回答这些问题，那么他就给我留下了一个好印象。顺带提一句，也许你可能会问，即使不用关键字 const，也还是能很容易写出功能正确的程序，那么我为什么还要如此看重关键字 const 呢？</p><p>我也如下的几下理由：</p><ol><li>关键字 const 的作用是为给读你代码的人传达非常有用的信息，实际上，声明一个参数为常量是为了告诉了用户这个参数的应用目的。如果你曾花很多时间清理其它人留下的垃圾，你就会很快学会感谢这点多余的信息。（当然，懂得用 const 的程序员很少会留下的垃圾让别人来清理的。）</li><li>通过给优化器一些附加的信息，使用关键字 const 也许能产生更紧凑的代码。</li><li>合理地使用关键字 const 可以使编译器很自然地保护那些不希望被改变的参数，防止其被无意的代码修改。简而言之，这样可以减少 bug 的出现。</li></ol></blockquote><h3 id="volatile含意"><a class="anchor" href="#volatile含意">#</a> volatile 含意</h3><blockquote><p>一个定义为 volatile 的变量是说这变量可能会被意想不到地改变，这样，编译器就不会去假设这个变量的值了。精确地说就是，优化器在用到这个变量时必须每次都小心地重新读取这个变量的值，而不是使用保存在寄存器里的备份。下面是 volatile 变量的几个例子：</p><ol><li>并行设备的硬件寄存器（如：状态寄存器）</li><li>一个中断服务子程序中会访问到的非自动变量 (Non-automatic variables)</li><li>多线程应用中被几个任务共享的变量</li></ol><p>回答不出这个问题的人是不会被雇佣的。我认为这是区分 C 程序员和嵌入式系统程序员的最基本的问题。搞嵌入式的家伙们经常同硬件、中断、RTOS 等等打交道，所有这些都要求用到 volatile 变量。不懂得 volatile 的内容将会带来灾难。<br>假设被面试者正确地回答了这是问题（嗯，怀疑是否会是这样），我将稍微深究一下，看一下这家伙是不是直正懂得 volatile 完全的重要性。<br>1) 一个参数既可以是 const 还可以是 volatile 吗？解释为什么。<br>2); 一个指针可以是 volatile 吗？解释为什么。<br>3); 下面的函数有什么错误：</p><p>int square(volatile int *ptr)<br>{<br>return *ptr * *ptr;<br>}</p><p><strong>下面是答案：</strong><br>1) 是的。一个例子是只读的状态寄存器。它是 volatile 因为它可能被意想不到地改变。它是 const 因为程序不应该试图去修改它。<br>2); 是的。尽管这并不很常见。一个例子是当一个中服务子程序修该一个指向一个 buffer 的指针时。<br>\3) 这段代码有点变态。这段代码的目的是用来返指针<em> ptr 指向值的平方，但是，由于</em> ptr 指向一个 volatile 型参数，编译器将产生类似下面的代码：</p><p>int square(volatile int *ptr)<br>{<br>int a,b;<br>a = *ptr;<br>b = *ptr;<br>return a * b;<br>}</p><p>由于 * ptr 的值可能被意想不到地该变，因此 a 和 b 可能是不同的。结果，这段代码可能返不是你所期望的平方值！正确的代码如下：</p><p>long square(volatile int *ptr)<br>{<br>int a;<br>a = *ptr;<br>return a * a;<br>}</p></blockquote><h3 id="位操作"><a class="anchor" href="#位操作">#</a> 位操作</h3><blockquote><p>嵌入式系统总是要用户对变量或寄存器进行位操作。给定一个整型变量 a，写两段代码，第一个设置 a 的 bit 3，第二个清除 a 的 bit 3。在以上两个操作中，要保持其它位不变。<br>对这个问题有三种基本的反应</p><ol><li>不知道如何下手。该被面者从没做过任何嵌入式系统的工作。</li><li>用 bit fields。Bit fields 是被扔到 C 语言死角的东西，它保证你的代码在不同编译器之间是不可移植的，同时也保证了的你的代码是不可重用的。我最近不幸看到 Infineon 为其较复杂的通信芯片写的驱动程序，它用到了 bit fields 因此完全对我无用，因为我的编译器用其它的方式来实现 bit fields 的。从道德讲：永远不要让一个非嵌入式的家伙粘实际硬件的边。</li><li>用 #defines 和 bit masks 操作。这是一个有极高可移植性的方法，是应该被用到的方法。</li></ol><p><strong>最佳的解决方案如下：</strong></p><p>#define BIT3 (0x1 &lt;&lt; 3)<br>static int a;</p><p>void set_bit3(void)<br>{<br>a |= BIT3;<br>}<br>void clear_bit3(void)<br>{<br>a &amp;= ~BIT3;<br>}</p><p>一些人喜欢为设置和清除值而定义一个掩码同时定义一些说明常数，这也是可以接受的。我希望看到几个要点：说明常数、|= 和 &amp;=~ 操作。</p></blockquote><h3 id="访问固定的内存位置"><a class="anchor" href="#访问固定的内存位置">#</a> 访问固定的内存位置</h3><blockquote><p>嵌入式系统经常具有要求程序员去访问某特定的内存位置的特点。在某工程中，要求设置一绝对地址为 0x67a9 的整型变量的值为 0xaa66。编译器是一个纯粹的 ANSI 编译器。写代码去完成这一任务。<br>这一问题测试你是否知道为了访问一绝对地址把一个整型数强制转换（typecast）为一指针是合法的。这一问题的实现方式随着个人风格不同而不同。典型的类似代码如下：<br>int *ptr;<br>ptr = (int *)0x67a9;<br>*ptr = 0xaa55;</p><p>A more obscure approach is:<br>一个较晦涩的方法是：</p><p>*(int * const)(0x67a9) = 0xaa55;</p><p>即使你的品味更接近第二种方案，但我建议你在面试时使用第一种方案。</p></blockquote><h3 id="中断"><a class="anchor" href="#中断">#</a> 中断</h3><blockquote><p>中断是嵌入式系统中重要的组成部分，这导致了很多编译开发商提供一种扩展 — 让标准 C 支持中断。具代表事实是，产生了一个新的关键字 __interrupt。下面的代码就使用了__interrupt 关键字去定义了一个中断服务子程序 (ISR)，请评论一下这段代码的。</p><p>__interrupt double compute_area (double radius)<br>{<br>double area = PI * radius * radius;<br>printf(&quot;\nArea = %f&quot;, area);<br>return area;<br>}</p><p>这个函数有太多的错误了，以至让人不知从何说起了：</p><ol><li>ISR 不能返回一个值。如果你不懂这个，那么你不会被雇用的。</li><li>ISR 不能传递参数。如果你没有看到这一点，你被雇用的机会等同第一项。</li><li>在许多的处理器 / 编译器中，浮点一般都是不可重入的。有些处理器 / 编译器需要让额处的寄存器入栈，有些处理器 / 编译器就是不允许在 ISR 中做浮点运算。此外，ISR 应该是短而有效率的，在 ISR 中做浮点运算是不明智的。</li><li>与第三点一脉相承，printf () 经常有重入和性能上的问题。如果你丢掉了第三和第四点，我不会太为难你的。不用说，如果你能得到后两点，那么你的被雇用前景越来越光明了。</li></ol></blockquote><h3 id="代码分析"><a class="anchor" href="#代码分析">#</a> 代码分析</h3><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">unsigned</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">(</span>a<span class="token operator">+</span>b <span class="token operator">></span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"> 6"</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"&lt;= 6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>这个问题测试你是否懂得 C 语言中的整数自动转换原则，我发现有些开发者懂得极少这些东西。不管如何，这无符号整型问题的答案是输出是 &quot;&gt;6&quot;。原因是当表达式中存在有符号类型和无符号类型时所有的操作数都自动转换为无符号类型。因此 - 20 变成了一个非常大的正整数，所以该表达式计算出的结果大于 6。这一点对于应当频繁用到无符号数据类型的嵌入式系统来说是丰常重要的。如果你答错了这个问题，你也就到了得不到这份工作的边缘。</p></blockquote><h3 id="评价代码"><a class="anchor" href="#评价代码">#</a> 评价代码</h3><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">unsigned</span> <span class="token keyword">int</span> zero <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">unsigned</span> <span class="token keyword">int</span> compzero <span class="token operator">=</span> <span class="token number">0xFFFF</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/*1's complement of zero */</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 对于一个 int 型不是 16 位的处理器为说，上面的代码是不正确的。应编写如下：</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">unsigned</span> <span class="token keyword">int</span> compzero <span class="token operator">=</span> <span class="token operator">~</span><span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr></table></figure><blockquote><p>这一问题真正能揭露出应试者是否懂得处理器字长的重要性。在我的经验里，好的嵌入式程序员非常准确地明白硬件的细节和它的局限，然而 PC 机程序往往把硬件作为一个无法避免的烦恼。<br>到了这个阶段，应试者或者完全垂头丧气了或者信心满满志在必得。如果显然应试者不是很好，那么这个测试就在这里结束了。但如果显然应试者做得不错，那么我就扔出下面的追加问题，这些问题是比较难的，我想仅仅非常优秀的应试者能做得不错。提出这些问题，我希望更多看到应试者应付问题的方法，而不是答案。不管如何，你就当是这个娱乐吧...</p></blockquote><h3 id="动态内存分配"><a class="anchor" href="#动态内存分配">#</a> 动态内存分配</h3><blockquote><p>尽管不像非嵌入式计算机那么常见，嵌入式系统还是有从堆（heap）中动态分配内存的过程的。那么嵌入式系统中，动态分配内存可能发生的问题是什么？<br>这里，我期望应试者能提到内存碎片，碎片收集的问题，变量的持行时间等等。这个主题已经在 ESP 杂志中被广泛地讨论过了（主要是 P.J. Plauger, 他的解释远远超过我这里能提到的任何解释），所有回过头看一下这些杂志吧！让应试者进入一种虚假的安全感觉后，我拿出这么一个小节目：<br>下面的代码片段的输出是什么，为什么？</p></blockquote><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">char</span> <span class="token operator">*</span>ptr<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ptr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"Got a null pointer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">else</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"Got a valid pointer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><blockquote><p>这是一个有趣的问题。最近在我的一个同事不经意把 0 值传给了函数 malloc，得到了一个合法的指针之后，我才想到这个问题。这就是上面的代码，该代码的输出是 &quot;Got a valid pointer&quot;。我用这个来开始讨论这样的一问题，看看被面试者是否想到库例程这样做是正确。得到正确的答案固然重要，但解决问题的方法和你做决定的基本原理更重要些。</p></blockquote><h3 id="typedef"><a class="anchor" href="#typedef">#</a> Typedef</h3><blockquote><p>Typedef 在 C 语言中频繁用以声明一个已经存在的数据类型的同义字。也可以用预处理器做类似的事。例如，思考一下下面的例子：</p><p>#define dPS struct s *<br>typedef struct s * tPS;</p><p>以上两种情况的意图都是要定义 dPS 和 tPS 作为一个指向结构 s 指针。哪种方法更好呢？（如果有的话）为什么？<br>这是一个非常微妙的问题，任何人答对这个问题（正当的原因）是应当被恭喜的。答案是：typedef 更好。思考下面的例子：</p><p>dPS p1,p2;<br>tPS p3,p4;</p><p>第一个扩展为</p><p>struct s * p1, p2;</p><p>上面的代码定义 p1 为一个指向结构的指，p2 为一个实际的结构，这也许不是你想要的。第二个例子正确地定义了 p3 和 p4 两个指针。</p></blockquote><h3 id="晦涩的语法"><a class="anchor" href="#晦涩的语法">#</a> 晦涩的语法</h3><blockquote><p>C 语言同意一些令人震惊的结构，下面的结构是合法的吗，如果是它做些什么？</p><p>int a = 5, b = 7, c;<br>c = a+++b;</p><p>这个问题将做为这个测验的一个愉快的结尾。不管你相不相信，上面的例子是完全合乎语法的。问题是编译器如何处理它？水平不高的编译作者实际上会争论这个问题，根据最处理原则，编译器应当能处理尽可能所有合法的用法。因此，上面的代码被处理成：</p><p>c = a++ + b;</p><p>因此，这段代码持行后 a = 6, b = 7, c = 12。<br>如果你知道答案，或猜出正确答案，做得好。如果你不知道答案，我也不把这个当作问题。我发现这个问题的最大好处是这是一个关于代码编写风格，代码的可读性，代码的可修改性的好的话题。</p></blockquote><div class="tags"><a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/" rel="tag"><i class="ic i-tag"></i> 嵌入式面试八股文</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2024-03-19 01:18:52" itemprop="dateModified" datetime="2024-03-19T01:18:52+08:00">2024-03-19</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>alittlestory <i class="ic i-at"><em>@</em></i>昨日已逝，明日未知，而今日为金</li><li class="link"><strong>本文链接：</strong> <a href="https://littlestory1.github.io/2024/03/19/baguwen/0-1-%E5%B5%8C%E8%BD%AF%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95/" title="嵌入式软件笔试面试八股文">https://littlestory1.github.io/2024/03/19/baguwen/0-1-嵌软笔试面试/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC96aC1DTg=="><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2024/03/19/baguwen/1-0-C%E8%AF%AD%E8%A8%80-%E6%9D%82%E9%A1%B9/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;i.imgs.ovh&#x2F;2023&#x2F;11&#x2F;24&#x2F;MuSSd.jpeg" title="1-0-C语言-杂项"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 嵌入式面试八股文</span><h3>1-0-C语言-杂项</h3></a></div><div class="item right"><a href="/2024/03/19/baguwen/0-2-%E5%B5%8C%E8%BD%AF%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95-%E7%BB%8F%E5%85%B8/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;i.imgs.ovh&#x2F;2023&#x2F;11&#x2F;24&#x2F;Mu0hm.jpeg" title="0-2-嵌软笔试面试-经典"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 嵌入式面试八股文</span><h3>0-2-嵌软笔试面试-经典</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%BD%AF%E4%BB%B6%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95"><span class="toc-number">1.</span> <span class="toc-text">嵌入式软件笔试面试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#define-%E5%A3%B0%E6%98%8E"><span class="toc-number">1.1.</span> <span class="toc-text">#define 声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E5%AE%8Fmin"><span class="toc-number">1.2.</span> <span class="toc-text">&quot;标准&quot; 宏 MIN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%BB%E5%BE%AA%E7%8E%AF"><span class="toc-number">1.3.</span> <span class="toc-text">死循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%A3%B0%E6%98%8E"><span class="toc-number">1.4.</span> <span class="toc-text">数据声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#static%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.5.</span> <span class="toc-text">static 的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#const%E5%90%AB%E6%84%8F"><span class="toc-number">1.6.</span> <span class="toc-text">const 含意</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#volatile%E5%90%AB%E6%84%8F"><span class="toc-number">1.7.</span> <span class="toc-text">volatile 含意</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%8D%E6%93%8D%E4%BD%9C"><span class="toc-number">1.8.</span> <span class="toc-text">位操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E5%9B%BA%E5%AE%9A%E7%9A%84%E5%86%85%E5%AD%98%E4%BD%8D%E7%BD%AE"><span class="toc-number">1.9.</span> <span class="toc-text">访问固定的内存位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD"><span class="toc-number">1.10.</span> <span class="toc-text">中断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-number">1.11.</span> <span class="toc-text">代码分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%84%E4%BB%B7%E4%BB%A3%E7%A0%81"><span class="toc-number">1.12.</span> <span class="toc-text">评价代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D"><span class="toc-number">1.13.</span> <span class="toc-text">动态内存分配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#typedef"><span class="toc-number">1.14.</span> <span class="toc-text">Typedef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%A6%E6%B6%A9%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">1.15.</span> <span class="toc-text">晦涩的语法</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/2024/03/19/baguwen/0-1-%E5%B5%8C%E8%BD%AF%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95/" rel="bookmark" title="嵌入式软件笔试面试八股文">嵌入式软件笔试面试八股文</a></li><li><a href="/2024/03/19/baguwen/1-0-C%E8%AF%AD%E8%A8%80-%E6%9D%82%E9%A1%B9/" rel="bookmark" title="1-0-C语言-杂项">1-0-C语言-杂项</a></li><li><a href="/2024/03/19/baguwen/1-1-C%E8%AF%AD%E8%A8%80-%E5%86%85%E5%AD%98/" rel="bookmark" title="1-1-C语言-内存">1-1-C语言-内存</a></li><li><a href="/2024/03/19/baguwen/1-2-C%E8%AF%AD%E8%A8%80-%E6%8C%87%E9%92%88&%E6%95%B0%E7%BB%84/" rel="bookmark" title="1-2-C语言-指针&数组">1-2-C语言-指针&数组</a></li><li><a href="/2024/03/19/baguwen/1-3-C%E8%AF%AD%E8%A8%80-%E9%A2%84%E5%A4%84%E7%90%86/" rel="bookmark" title="1-3-C语言-预处理">1-3-C语言-预处理</a></li><li><a href="/2024/03/19/baguwen/0-2-%E5%B5%8C%E8%BD%AF%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95-%E7%BB%8F%E5%85%B8/" rel="bookmark" title="0-2-嵌软笔试面试-经典">0-2-嵌软笔试面试-经典</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="alittlestory" data-src="/images/avatar.jpg"><p class="name" itemprop="name">alittlestory</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">14</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">4</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">4</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xpdHRsZXN0b3J5MQ==" title="https:&#x2F;&#x2F;github.com&#x2F;littlestory1"><i class="ic i-github"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-heart"></i>友達</a><ul class="submenu"><li class="item"><span class="exturl" data-url="aHR0cHM6Ly9qZXJyeTU4OS5naXRodWIuaW8v"><i class="ic i-magic"></i>jerry589</span></li><li class="item"><span class="exturl" data-url="aHR0cHM6Ly9tYXNvYW1lLmdpdGh1Yi5pby8="><i class="ic i-magic"></i>masoame</span></li></ul></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-magic"></i>链接</a><ul class="submenu"><li class="item"><span class="exturl" data-url="aHR0cHM6Ly9pbWdsb2MuY29tL2FsaXR0bGVzdG9yeQ=="><i class="ic i-magic"></i>图床</span></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2024/03/19/baguwen/1-0-C%E8%AF%AD%E8%A8%80-%E6%9D%82%E9%A1%B9/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2024/03/19/baguwen/0-2-%E5%B5%8C%E8%BD%AF%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95-%E7%BB%8F%E5%85%B8/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/stm32/" title="分类于 stm32单片机">stm32单片机</a></div><span><a href="/2023/11/21/stm32/stm32%EF%BC%88%E5%89%8D%E8%A8%80%EF%BC%89/" title="stm32前言">stm32前言</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/baguwen/" title="分类于 嵌入式面试八股文">嵌入式面试八股文</a></div><span><a href="/2024/03/19/baguwen/1-1-C%E8%AF%AD%E8%A8%80-%E5%86%85%E5%AD%98/" title="1-1-C语言-内存">1-1-C语言-内存</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/lanqiao/" title="分类于 蓝桥杯嵌入式">蓝桥杯嵌入式</a></div><span><a href="/2024/03/14/lanqiao/LED%E6%A8%A1%E5%9D%97/" title="LED模块">LED模块</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/stm32/" title="分类于 stm32单片机">stm32单片机</a></div><span><a href="/2023/12/04/stm32/%E7%BA%A2%E5%A4%96%E6%B5%8B%E6%AC%A1/" title="红外计次">红外计次</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/baguwen/" title="分类于 嵌入式面试八股文">嵌入式面试八股文</a></div><span><a href="/2024/03/19/baguwen/1-3-C%E8%AF%AD%E8%A8%80-%E9%A2%84%E5%A4%84%E7%90%86/" title="1-3-C语言-预处理">1-3-C语言-预处理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/stm32/" title="分类于 stm32单片机">stm32单片机</a></div><span><a href="/2023/11/28/stm32/stm32-%E4%B8%AD%E6%96%AD%E7%B3%BB%E7%BB%9F/" title="stm32-中断系统">stm32-中断系统</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 杂谈">杂谈</a></div><span><a href="/2023/12/26/note/%E5%AD%A6%E6%9C%9F%E7%BB%93%E6%9D%9F/" title="学期结束">学期结束</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/baguwen/" title="分类于 嵌入式面试八股文">嵌入式面试八股文</a></div><span><a href="/2024/03/19/baguwen/0-2-%E5%B5%8C%E8%BD%AF%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95-%E7%BB%8F%E5%85%B8/" title="0-2-嵌软笔试面试-经典">0-2-嵌软笔试面试-经典</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/stm32/" title="分类于 stm32单片机">stm32单片机</a></div><span><a href="/2024/02/29/stm32/stm32%E2%80%94TIM%E5%AE%9A%E6%97%B6%E4%B8%AD%E6%96%AD/" title="stm32—TIM定时中断">stm32—TIM定时中断</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 杂谈">杂谈</a></div><span><a href="/2023/11/21/note/%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/" title="第一篇博客">第一篇博客</a></span></li></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">alittlestory @ alittlestory</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2024/03/19/baguwen/0-1-嵌软笔试面试/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>